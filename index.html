<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>G·ª≠i V·ª£ Y√™u</title>

<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#f5b6c4">

<style>
body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, "Segoe UI", sans-serif;
  background:
    linear-gradient(rgba(255,200,210,0.55), rgba(255,200,210,0.55)),
    url('bg.jpg') center/cover no-repeat;
  display: flex;
  justify-content: center;
  align-items: center;
  overflow: hidden;
}

/* MENU */
.menu-btn {
  position: fixed;
  top: 16px;
  left: 16px;
  font-size: 26px;
  cursor: pointer;
  z-index: 20;
}

.menu {
  position: fixed;
  top: 0;
  left: -100%;
  width: 80%;
  height: 100%;
  background: #fff;
  padding: 18px;
  transition: 0.3s;
  z-index: 30;
  overflow-y: auto;
}

.menu.show { left: 0; }

.menu h3 {
  margin: 10px 0;
}

.menu ul {
  padding-left: 18px;
  font-size: 14px;
}

.menu textarea {
  width: 100%;
  min-height: 80px;
  border-radius: 14px;
  border: 1px solid #ddd;
  padding: 10px;
  font-family: inherit;
}

.menu button {
  margin-top: 10px;
  padding: 10px 18px;
  border: none;
  border-radius: 20px;
  background: #e98a9b;
  color: #fff;
  cursor: pointer;
}

/* APP */
.app {
  max-width: 380px;
  width: 100%;
  padding: 26px;
  text-align: center;
  color: #5a2f2f;
}

.header h1 {
  font-size: 26px;
  margin: 0;
}

.date {
  margin-top: 6px;
  font-size: 14px;
  opacity: 0.7;
}

.sub {
  margin-top: 4px;
  font-size: 13px;
  opacity: 0.6;
}

.anchor {
  margin-top: 18px;
  font-size: 15px;
  opacity: 0.55;
}

.card {
  margin-top: 26px;
  background: rgba(255,255,255,0.6);
  backdrop-filter: blur(8px);
  border-radius: 26px;
  padding: 28px;
  font-size: 18px;
  line-height: 1.8;
  box-shadow: 0 20px 40px rgba(0,0,0,0.12);
}

.like {
  margin-top: 14px;
  font-size: 26px;
  cursor: pointer;
  user-select: none;
}

.like.active { color: #e85b77; }

.btn {
  margin-top: 26px;
  background: #e98a9b;
  border: none;
  border-radius: 30px;
  padding: 14px 28px;
  font-size: 16px;
  color: #fff;
  cursor: pointer;
}

.footer {
  margin-top: 30px;
  font-size: 12px;
  opacity: 0.45;
}

/* tim bay */
.heart {
  position: fixed;
  bottom: -20px;
  color: rgba(255,255,255,0.5);
  font-size: 14px;
  animation: float 12s linear forwards;
}

@keyframes float {
  to { transform: translateY(-120vh); opacity: 0; }
}
</style>
</head>

<body>

<!-- MENU -->
<div class="menu-btn" onclick="toggleMenu()">‚ò∞</div>

<div class="menu" id="menu">
  <h3>üìå ƒê√£ l∆∞u</h3>
  <ul id="savedList"></ul>

  <h3>‚úçÔ∏è Th√™m c√¢u</h3>
  <textarea id="newText" placeholder="Ch·ªìng mu·ªën n√≥i g√¨ v·ªõi v·ª£‚Ä¶"></textarea>
  <button onclick="addText()">L∆∞u</button>

  <br><br>
  <button onclick="toggleMenu()">‚¨ÖÔ∏è Tho√°t</button>
</div>

<!-- APP -->
<div class="app">
  <div class="header">
    <h1>üíó G·ª≠i V·ª£ Y√™u üíó</h1>
    <div class="date" id="date"></div>
    <div class="sub">Th√™m m·ªôt ng√†y ch·ªìng ƒë∆∞·ª£c y√™u v·ª£</div>
  </div>

  <div class="anchor">L·∫°i m·ªôt ng√†y ƒë∆∞·ª£c g·∫∑p v·ª£</div>

  <div class="card" id="message"></div>

  <div class="like" id="like" onclick="toggleLike()">ü§ç</div>

  <button class="btn" onclick="next()">‚ù§ Ch·ªìng d√†nh cho v·ª£</button>

  <div class="footer">T·∫°o ri√™ng cho v·ª£ c·ªßa ch·ªìng üê±</div>
</div>

<script>
const messages = [
  "V·ª£ ∆°i anh nh·ªõ v·ª£ l·∫Øm.",
  "Anh y√™u v·ª£ nhi·ªÅu l·∫Øm.",
  "Huhu anh nh·ªõ v·ª£ l·∫Øm lu√¥n.",
  "V·ª£ ƒëang l√†m g√¨ ƒë√≥, c√≤n anh ƒëang r·∫•t nh·ªõ v·ª£.",
  "Anh s·∫Ω lu√¥n tr·ªü v·ªÅ.",
  "H√¥m nay g·∫∑p v·ª£ th·∫≠t l√† vui.",
  "C√≥ v·ª£ th·∫≠t l√† vui.",
  "V·ª£ bi·∫øt kh√¥ng, anh y√™u v·ª£ nhi·ªÅu l·∫Øm.",
  "L·∫°i m·ªôt ng√†y ƒë∆∞·ª£c g·∫∑p v·ª£.",
  "Ch·ªâ c·∫ßn c√≥ v·ª£, ng√†y n√†o c≈©ng d·ªãu l·∫°i."
];

let used = [];
let current = "";
let saved = JSON.parse(localStorage.getItem("savedTexts") || "[]");

function next() {
  if (used.length === messages.length) used = [];
  let i;
  do {
    i = Math.floor(Math.random() * messages.length);
  } while (used.includes(i));
  used.push(i);

  current = messages[i];
  document.getElementById("message").innerText = current;
  updateLike();
}

function toggleLike() {
  if (!current) return;
  if (saved.includes(current)) {
    saved = saved.filter(t => t !== current);
  } else {
    saved.push(current);
  }
  localStorage.setItem("savedTexts", JSON.stringify(saved));
  updateLike();
  renderSaved();
}

function updateLike() {
  const like = document.getElementById("like");
  const liked = saved.includes(current);
  like.innerText = liked ? "‚ù§Ô∏è" : "ü§ç";
  like.classList.toggle("active", liked);
}

function toggleMenu() {
  document.getElementById("menu").classList.toggle("show");
  renderSaved();
}

function renderSaved() {
  const ul = document.getElementById("savedList");
  ul.innerHTML = "";
  saved.forEach((t, i) => {
    const li = document.createElement("li");
    li.innerText = `${i + 1}. ${t}`;
    ul.appendChild(li);
  });
}

function addText() {
  const t = document.getElementById("newText").value.trim();
  if (!t) return;
  messages.push(t);
  document.getElementById("newText").value = "";
  current = t;
  document.getElementById("message").innerText = t;
  updateLike();
}

// init
next();

// date
const d = new Date();
document.getElementById("date").innerText =
  d.toLocaleDateString("vi-VN", {
    weekday: "long",
    day: "numeric",
    month: "long",
    year: "numeric"
  });

// hearts
setInterval(() => {
  const h = document.createElement("div");
  h.className = "heart";
  h.innerText = "‚ù§";
  h.style.left = Math.random() * 100 + "vw";
  h.style.fontSize = 10 + Math.random() * 10 + "px";
  document.body.appendChild(h);
  setTimeout(() => h.remove(), 12000);
}, 1400);

// service worker
if ("serviceWorker" in navigator) {
  navigator.serviceWorker.register("sw.js");
}
</script>

</body>
</html>
